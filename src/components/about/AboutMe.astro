---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";

import authorImage from "@/assets/images/about/designer.jpg";

interface AboutItem {
	title: string;
	description: string;
	icon: string;
}

const allAboutMeEntries = await getCollection("aboutMe");
const aboutMeEntry = allAboutMeEntries[0];

const sectionTitle = aboutMeEntry?.data.sectionTitle || "Benoit Gillet, fondateur de Naturelec";
const sectionDescription =
	aboutMeEntry?.data.sectionDescription ||
	"Électricien passionné depuis plusieurs années, spécialisé dans les solutions qui allient performance énergétique et respect de l'environnement pour créer des installations durables et optimisées.";
const aboutMeImage = aboutMeEntry?.data.image || authorImage;
const aboutMeImageAlt = aboutMeEntry?.data.imageAlt || "Benoit Gillet";

const featureData = [...(aboutMeEntry?.data.facts || [])];
---

<section id="about-alt" class="bg-background text-foreground overflow-hidden py-16 md:py-24">
	<div class="site-container">
		<div class="grid items-center gap-12 lg:grid-cols-2 lg:gap-20">
			<div class="order-2 lg:order-1">
				<div data-aos="fade-right" data-aos-trigger="#about-alt">
					<h2 class="text-foreground h2 mb-4">{sectionTitle}</h2>
					<p class="description mb-12">{sectionDescription}</p>
				</div>
				<div class="grid gap-6 md:grid-cols-2">
					{
						featureData.map((item, idx) => (
							<div
								class="group hover:bg-muted rounded-lg border p-6 shadow-md transition-colors"
								data-aos="fade-in"
								data-aos-trigger="#about-alt"
								data-aos-delay={0.8 + idx * 0.2}
							>
								<Icon name={item.icon} class="text-accent h-8 w-8" />
								<h3 class="text-foreground group-hover:text-accent mt-2 mb-2 text-lg font-semibold transition-colors duration-300">
									{item.title}
								</h3>
								<p class="text-muted-foreground text-sm">{item.description}</p>
							</div>
						))
					}
				</div>
			</div>
			<div class="order-1 lg:order-2">
				<div class="relative" data-aos="fade-left" data-aos-trigger="#about-alt">
					<div class="relative">
						{
							aboutMeImage && (
								<Image
									src={aboutMeImage}
									alt={aboutMeImageAlt}
									class="aspect-square w-full rounded-xl object-cover shadow-md md:rounded-2xl"
								/>
							)
						}
					</div>
					<div class="bg-primary/10 absolute -right-4 -bottom-4 h-32 w-32 rounded-full blur-2xl">
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
