/* -------------------------------------------------------------
GLOBAL IMPORTS
------------------------------------------------------------- */

@import url("./fonts.css");

/* Tailwind base + animation plugin */
@import "tailwindcss";
@import "tw-animate-css";

/* Tailwind plugins */
@plugin "@tailwindcss/forms";

/* Dark mode variant */
@custom-variant dark (&:where(.dark, .dark *));

/* Theme definition */
@import "./tailwind-theme.css";

/* -------------------------------------------------------------
LAYERED IMPORTS
------------------------------------------------------------- */

@import "./aos.css" layer(utilities);
@import "./markdown-content.css" layer(components);
@import "./buttons.css" layer(components);

/* -------------------------------------------------------------
BASE LAYER
------------------------------------------------------------- */

@layer base {
	:root {
		/* Background & Text */
		--background: var(--light-bg-pri);
		--foreground: var(--light-text-pri);
		--btn-sec-hover: var(--light-btn-sec-hover);
		--bgter: var(--light-bg-ter);
		--bgforth: var(--light-bg-forth);

		/* Card / Popover */
		--card: var(--color-base-50);
		--card-foreground: var(--color-base-950);
		--popover: var(--light-bg-ter);
		--popover-foreground: var(--light-text-pri);

		/* Buttons */
		--primary: var(--light-btn-pri);
		--primary-foreground: var(--light-text-btn);
		--secondary: var(--light-btn-sec);
		--secondary-foreground: var(--light-text-btn);

		/* Muted / Accent */
		--muted: var(--light-bg-sec);
		--muted-foreground: var(--color-base-700);
		--accent: var(--light-brand-pri);
		--accent-sec: var(--light-brand-sec);
		--accent-foreground: var(--light-text-btn);

		/* States */
		--info: var(--color-sky-300);
		--info-foreground: var(--light-text-info);
		--success: var(--color-green-300);
		--success-foreground: var(--color-green-950);
		--warning: var(--color-amber-300);
		--warning-foreground: var(--color-amber-950);
		--error: var(--color-red-700);
		--error-foreground: var(--color-base-50);

		/* Borders / Inputs / Focus */
		--border: var(--color-base-200);
		--input: var(--light-border);
		--outline: var(--color-primary-600);

		/* Misc */
		--default-transition-duration: 0.2s;
		--radius: 0.65rem;
		--spacing: 0.25rem;

		/* Links */
		--link: var(--light-link);
		--link-hover: var(--light-link-hover);

		/* Code blocks (Shiki) */
		--astro-code-foreground: var(--color-base-100);
		--astro-code-background: var(--color-base-900);
		--astro-code-token-constant: var(--color-primary-300);
		--astro-code-token-string: var(--color-primary-700);
		--astro-code-token-comment: var(--color-base-400);
		--astro-code-token-keyword: var(--color-base-300);
		--astro-code-token-parameter: var(--color-sky-400);
		--astro-code-token-function: var(--color-base-100);
		--astro-code-token-string-expression: var(--color-primary-300);
		--astro-code-token-punctuation: var(--color-base-400);
		--astro-code-token-link: var(--color-base-200);
	}

	/* ---------------------------------------------------------
	DARK MODE OVERRIDES
	--------------------------------------------------------- */
	.dark {
		--background: var(--dark-bg-pri);
		--btn-sec-hover: var(--dark-btn-sec-hover);
		--bgter: var(--dark-bg-ter);
		--bgforth: var(--dark-bg-sec);
		--foreground: var(--dark-text-pri);
		--foreground-hover: var(--dark-text-pri-dimmed);
		--card: var(--color-base-950);
		--card-foreground: var(--color-base-50);
		--popover: var(--dark-bg-sec);
		--popover-foreground: var(--dark-text-pri-dimmed);
		--primary: var(--dark-cta);
		--primary-foreground: var(--dark-text-btn);
		--secondary: var(--dark-btn-sec);
		--secondary-foreground: var(--color-base-950);
		--muted: var(--dark-bg-sec);
		--muted-foreground: var(--dark-text-pri-dimmed);
		--accent: var(--dark-brand-pri-dimmed);
		--accent-sec: var(--dark-brand-sec);
		--accent-foreground: var(--color-base-950);
		--info: var(--color-sky-300);
		--info-foreground: var(--color-sky-950);
		--success: var(--color-green-300);
		--success-foreground: var(--color-green-950);
		--warning: var(--color-amber-300);
		--warning-foreground: var(--color-amber-950);
		--error: var(--color-red-800);
		--error-foreground: var(--color-base-50);
		--border: var(--dark-border);
		--input: var(--dark-border);
		--link: var(--dark-link);
		--link-hover: var(--dark-link-hover);
	}

	/* ---------------------------------------------------------
	GLOBAL ELEMENTS
	--------------------------------------------------------- */
	* {
		@apply border-border;
	}
	*:focus-visible {
		@apply outline-outline !transition-none;
	}
	html {
		@apply bg-background text-foreground leading-[1.6rem] scheme-light dark:scheme-dark;
		scroll-behavior: smooth;
		text-size-adjust: none;
		-moz-text-size-adjust: none;
		-webkit-text-size-adjust: none;
	}
	button {
		@apply cursor-pointer;
	}
	a {
		@apply hover:text-foreground-hover;
	}
}

/* -------------------------------------------------------------
LEAFLET POPUP STYLING
------------------------------------------------------------- */

.leaflet-container .naturelec-popup .leaflet-popup-content-wrapper {
	background-color: var(--background);
	color: var(--foreground);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

.leaflet-popup-tip {
	background: var(--background);
}

/* -------------------------------------------------------------
COMPONENTS LAYER
------------------------------------------------------------- */

@layer components {
	.site-container {
		@apply mx-auto max-w-[86rem] px-4 md:max-2xl:pr-24;
	}

	/* Navigation */
	.nav__link--base {
		@apply text-muted-foreground hover:text-foreground-hover leading-tight transition;
	}

	/* Service cards */
	.service-card[data-service-variant="electricite-generale"],
	.service-card[data-service-variant="electricite-generale-1"] {
		--service-accent: var(--light-brand-pri);
		--btn-accent-hover: var(--light-btn-pri-hover);
	}

	.service-card[data-service-variant="equipements-en-energie-renouvelable"],
	.service-card[data-service-variant="energies-renouvelables"] {
		--service-accent: var(--light-brand-sec);
		--btn-accent-hover: var(--light-btn-sec-hover);
	}

	.service-card[data-service-variant="domotique-et-maison-intelligente"] {
		--service-accent: var(--dark-cta-hover);
		--btn-accent-hover: var(--dark-cta);
	}

	.service-card[data-service-variant="maintenance-et-depannage"] {
		--service-accent: var(--light-text-sec);
		--btn-accent-hover: var(--light-text-pri);
	}

	/* Dark mode variants */
	.dark .service-card[data-service-variant="electricite-generale"],
	[data-theme="dark"] .service-card[data-service-variant="electricite-generale"],
	.dark .service-card[data-service-variant="electricite-generale-1"],
	[data-theme="dark"] .service-card[data-service-variant="electricite-generale-1"] {
		--service-accent: var(--dark-brand-pri);
		--btn-accent-hover: var(--dark-btn-pri-hover);
	}

	.dark .service-card[data-service-variant="maintenance-et-depannage"],
	[data-theme="dark"] .service-card[data-service-variant="maintenance-et-depannage"] {
		--service-accent: var(--dark-text-sec-dimmed);
		--btn-accent-hover: var(--dark-text-sec);
	}

	.dark .service-card[data-service-variant="equipements-en-energie-renouvelable"],
	[data-theme="dark"] .service-card[data-service-variant="equipements-en-energie-renouvelable"],
	.dark .service-card[data-service-variant="energies-renouvelables"],
	[data-theme="dark"] .service-card[data-service-variant="energies-renouvelables"] {
		--service-accent: var(--dark-brand-sec);
		--btn-accent-hover: var(--dark-btn-sec-hover);
	}

	.service-card .service-button {
		background-color: var(--service-accent, var(--accent));
	}
	.service-card .service-button:hover {
		background-color: var(--btn-accent-hover, var(--light-btn-pri-hover));
	}
	.service-card:hover {
		border-color: var(--service-accent, var(--accent));
	}

	.service-card h3 {
		color: var(--light-text-sec);
	}
	.dark .service-card h3 {
		color: var(--dark-text-sec-dimmed);
	}

	/* Badges */
	.badge {
		color: var(--service-accent, var(--accent));
	}
	.badge[data-service-variant="electricite-generale"] {
		--service-accent: var(--light-brand-pri);
	}
	.badge[data-service-variant="equipements-en-energie-renouvelable"],
	.badge[data-service-variant="energies-renouvelables"] {
		--service-accent: var(--light-brand-sec);
	}
	.badge[data-service-variant="domotique-et-maison-intelligente"] {
		--service-accent: var(--dark-cta-hover);
	}
	.badge[data-service-variant="maintenance-et-depannage"] {
		--service-accent: var(--light-text-sec);
	}

	.dark .badge[data-service-variant="maintenance-et-depannage"],
	[data-theme="dark"] .badge[data-service-variant="maintenance-et-depannage"] {
		--service-accent: var(--dark-text-sec-dimmed);
	}

	.dark .badge[data-service-variant="electricite-generale"],
	[data-theme="dark"] .badge[data-service-variant="electricite-generale"] {
		--service-accent: var(--dark-brand-pri);
	}
	.dark .badge[data-service-variant="equipements-en-energie-renouvelable"],
	[data-theme="dark"] .badge[data-service-variant="equipements-en-energie-renouvelable"],
	.dark .badge[data-service-variant="energies-renouvelables"],
	[data-theme="dark"] .badge[data-service-variant="energies-renouvelables"] {
		--service-accent: var(--dark-brand-sec);
	}

	/* Typography */
	.logo-text {
		@apply font-logo text-xl font-medium;
	}
	.h1 {
		@apply font-heading text-4xl leading-tight font-semibold lg:text-5xl;
	}
	.h2 {
		@apply font-heading text-2xl leading-tight font-semibold md:text-4xl lg:text-5xl;
	}
	.h3 {
		@apply font-heading text-lg leading-tight font-semibold md:text-xl lg:text-2xl;
	}
	.description {
		@apply text-muted-foreground text-pretty md:text-lg;
	}
}

/* -------------------------------------------------------------
UTILITIES LAYER
------------------------------------------------------------- */

@layer utilities {
	.primary-focus {
		@apply focus-visible:outline-outline focus-visible:outline-2;
	}

	.pause {
		animation-play-state: paused !important;
	}

	.starwind-transition-colors {
		transition-property:
			color, background-color, border-color, text-decoration-color, fill, stroke,
			--tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
		transition-duration: var(--default-transition-duration);
	}
}
